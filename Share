#!/usr/bin/env python3
# -*- coding: utf-8 -*-

import sys
import pandas as pd
import matplotlib.pyplot as plt

def main(inp, outp):
    df = pd.read_csv(inp, parse_dates=['Minute'])
    if df.empty:
        fig = plt.figure(figsize=(8,4))
        ax  = fig.add_subplot(111)
        ax.text(0.5,0.5,'No data',ha='center',va='center',fontsize=14)
        ax.axis('off')
        plt.savefig(outp)
        return

    fig = plt.figure(figsize=(12,6))
    ax  = fig.add_subplot(111)
    ax.bar(df['Minute'], df['TradesSaved'])
    ax.set_ylabel('Trades saved')
    ax.set_title('OTC Trades Saved per Minute (Last 5 days)')

    plt.xticks(rotation=45,ha='right')
    plt.tight_layout()
    plt.savefig(outp)

if __name__=='__main__':
    if len(sys.argv)!=3:
        print("Usage: python generate_otc_trades_saved_per_minute_chart.py <in.csv> <out.png>", file=sys.stderr)
        sys.exit(1)
    main(sys.argv[1], sys.argv[2])






#!/usr/bin/env python3
# -*- coding: utf-8 -*-

import sys
import pandas as pd
import matplotlib.pyplot as plt

def main(inp, outp):
    df = pd.read_csv(inp, parse_dates=['Week'])
    if df.empty:
        fig = plt.figure(figsize=(8,4))
        ax  = fig.add_subplot(111)
        ax.text(0.5,0.5,'No data',ha='center',va='center',fontsize=14)
        ax.axis('off')
        plt.savefig(outp)
        return

    fig = plt.figure(figsize=(12,6))
    ax  = fig.add_subplot(111)
    ax.bar(df['Week'], df['RecBreaks'])
    ax.set_ylabel('Rec Breaks')
    ax.set_title('OTC Intraday Rec Breaks per Week')

    plt.xticks(rotation=45,ha='right')
    plt.tight_layout()
    plt.savefig(outp)

if __name__=='__main__':
    if len(sys.argv)!=3:
        print("Usage: python generate_otc_intraday_rec_breaks_per_week_chart.py <in.csv> <out.png>", file=sys.stderr)
        sys.exit(1)
    main(sys.argv[1], sys.argv[2])















