using Microsoft.Extensions.Hosting;
using Microsoft.Extensions.Logging;

var host = Host.CreateDefaultBuilder(args)
    .ConfigureLogging(logging =>
    {
        logging.ClearProviders();  

        // enable simple console with IST timestamps and colors
        logging.AddSimpleConsole(options =>
        {
            options.IncludeScopes   = false;
            options.TimestampFormat = "[yyyy-MM-dd HH:mm:ss 'IST'] ";
            options.UseUtcTimestamp = false;               // use local (IST) time
            options.ColorBehavior   = LoggerColorBehavior.Enabled;
        });
    })
    .ConfigureServices((ctx, services) =>
    {
        // your existing registrationsâ€¦
        services.AddHostedService<ChartUpdaterWorker>();
    })
    .Build();

await host.RunAsync();
